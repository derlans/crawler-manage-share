(function(s,S){typeof exports=="object"&&typeof module<"u"?S(exports):typeof define=="function"&&define.amd?define(["exports"],S):(s=typeof globalThis<"u"?globalThis:s||self,S(s["@crawler-manage-share/utils"]={}))})(this,function(s){"use strict";function S(){this.__data__=[],this.size=0}function Q(t,e){return t===e||t!==t&&e!==e}function x(t,e){for(var r=t.length;r--;)if(Q(t[r][0],e))return r;return-1}var Zt=Array.prototype,Jt=Zt.splice;function Xt(t){var e=this.__data__,r=x(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Jt.call(e,r,1),--this.size,!0}function Qt(t){var e=this.__data__,r=x(e,t);return r<0?void 0:e[r][1]}function kt(t){return x(this.__data__,t)>-1}function te(t,e){var r=this.__data__,n=x(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function d(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}d.prototype.clear=S,d.prototype.delete=Xt,d.prototype.get=Qt,d.prototype.has=kt,d.prototype.set=te;function ee(){this.__data__=new d,this.size=0}function re(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function ne(t){return this.__data__.get(t)}function ae(t){return this.__data__.has(t)}var oe=typeof global=="object"&&global&&global.Object===Object&&global;const k=oe;var ie=typeof self=="object"&&self&&self.Object===Object&&self,se=k||ie||Function("return this")();const p=se;var ce=p.Symbol;const v=ce;var tt=Object.prototype,ue=tt.hasOwnProperty,fe=tt.toString,O=v?v.toStringTag:void 0;function le(t){var e=ue.call(t,O),r=t[O];try{t[O]=void 0;var n=!0}catch{}var u=fe.call(t);return n&&(e?t[O]=r:delete t[O]),u}var ge=Object.prototype,pe=ge.toString;function de(t){return pe.call(t)}var he="[object Null]",be="[object Undefined]",et=v?v.toStringTag:void 0;function P(t){return t==null?t===void 0?be:he:et&&et in Object(t)?le(t):de(t)}function C(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ye="[object AsyncFunction]",Te="[object Function]",$e="[object GeneratorFunction]",_e="[object Proxy]";function rt(t){if(!C(t))return!1;var e=P(t);return e==Te||e==$e||e==ye||e==_e}var ve=p["__core-js_shared__"];const L=ve;var nt=function(){var t=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function je(t){return!!nt&&nt in t}var me=Function.prototype,we=me.toString;function b(t){if(t!=null){try{return we.call(t)}catch{}try{return t+""}catch{}}return""}var Ae=/[\\^$.*+?()[\]{}|]/g,Se=/^\[object .+?Constructor\]$/,Oe=Function.prototype,Pe=Object.prototype,Ce=Oe.toString,Ie=Pe.hasOwnProperty,Ee=RegExp("^"+Ce.call(Ie).replace(Ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Fe(t){if(!C(t)||je(t))return!1;var e=rt(t)?Ee:Se;return e.test(b(t))}function Me(t,e){return t==null?void 0:t[e]}function y(t,e){var r=Me(t,e);return Fe(r)?r:void 0}var xe=y(p,"Map");const I=xe;var De=y(Object,"create");const E=De;function Ue(){this.__data__=E?E(null):{},this.size=0}function Be(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Le="__lodash_hash_undefined__",Ne=Object.prototype,Ge=Ne.hasOwnProperty;function ze(t){var e=this.__data__;if(E){var r=e[t];return r===Le?void 0:r}return Ge.call(e,t)?e[t]:void 0}var Re=Object.prototype,Ke=Re.hasOwnProperty;function He(t){var e=this.__data__;return E?e[t]!==void 0:Ke.call(e,t)}var Ve="__lodash_hash_undefined__";function We(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=E&&e===void 0?Ve:e,this}function T(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}T.prototype.clear=Ue,T.prototype.delete=Be,T.prototype.get=ze,T.prototype.has=He,T.prototype.set=We;function qe(){this.size=0,this.__data__={hash:new T,map:new(I||d),string:new T}}function Ye(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function D(t,e){var r=t.__data__;return Ye(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Ze(t){var e=D(this,t).delete(t);return this.size-=e?1:0,e}function Je(t){return D(this,t).get(t)}function Xe(t){return D(this,t).has(t)}function Qe(t,e){var r=D(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function j(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}j.prototype.clear=qe,j.prototype.delete=Ze,j.prototype.get=Je,j.prototype.has=Xe,j.prototype.set=Qe;var ke=200;function tr(t,e){var r=this.__data__;if(r instanceof d){var n=r.__data__;if(!I||n.length<ke-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new j(n)}return r.set(t,e),this.size=r.size,this}function m(t){var e=this.__data__=new d(t);this.size=e.size}m.prototype.clear=ee,m.prototype.delete=re,m.prototype.get=ne,m.prototype.has=ae,m.prototype.set=tr;function er(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var rr=function(){try{var t=y(Object,"defineProperty");return t({},"",{}),t}catch{}}();const at=rr;function ot(t,e,r){e=="__proto__"&&at?at(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var nr=Object.prototype,ar=nr.hasOwnProperty;function it(t,e,r){var n=t[e];(!(ar.call(t,e)&&Q(n,r))||r===void 0&&!(e in t))&&ot(t,e,r)}function U(t,e,r,n){var u=!r;r||(r={});for(var a=-1,o=e.length;++a<o;){var f=e[a],l=n?n(r[f],t[f],f,r,t):void 0;l===void 0&&(l=t[f]),u?ot(r,f,l):it(r,f,l)}return r}function or(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function F(t){return t!=null&&typeof t=="object"}var ir="[object Arguments]";function st(t){return F(t)&&P(t)==ir}var ct=Object.prototype,sr=ct.hasOwnProperty,cr=ct.propertyIsEnumerable,ur=st(function(){return arguments}())?st:function(t){return F(t)&&sr.call(t,"callee")&&!cr.call(t,"callee")};const fr=ur;var lr=Array.isArray;const N=lr;function gr(){return!1}var ut=typeof s=="object"&&s&&!s.nodeType&&s,ft=ut&&typeof module=="object"&&module&&!module.nodeType&&module,pr=ft&&ft.exports===ut,lt=pr?p.Buffer:void 0,dr=lt?lt.isBuffer:void 0,hr=dr||gr;const gt=hr;var br=9007199254740991,yr=/^(?:0|[1-9]\d*)$/;function Tr(t,e){var r=typeof t;return e=e??br,!!e&&(r=="number"||r!="symbol"&&yr.test(t))&&t>-1&&t%1==0&&t<e}var $r=9007199254740991;function pt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=$r}var _r="[object Arguments]",vr="[object Array]",jr="[object Boolean]",mr="[object Date]",wr="[object Error]",Ar="[object Function]",Sr="[object Map]",Or="[object Number]",Pr="[object Object]",Cr="[object RegExp]",Ir="[object Set]",Er="[object String]",Fr="[object WeakMap]",Mr="[object ArrayBuffer]",xr="[object DataView]",Dr="[object Float32Array]",Ur="[object Float64Array]",Br="[object Int8Array]",Lr="[object Int16Array]",Nr="[object Int32Array]",Gr="[object Uint8Array]",zr="[object Uint8ClampedArray]",Rr="[object Uint16Array]",Kr="[object Uint32Array]",c={};c[Dr]=c[Ur]=c[Br]=c[Lr]=c[Nr]=c[Gr]=c[zr]=c[Rr]=c[Kr]=!0,c[_r]=c[vr]=c[Mr]=c[jr]=c[xr]=c[mr]=c[wr]=c[Ar]=c[Sr]=c[Or]=c[Pr]=c[Cr]=c[Ir]=c[Er]=c[Fr]=!1;function Hr(t){return F(t)&&pt(t.length)&&!!c[P(t)]}function G(t){return function(e){return t(e)}}var dt=typeof s=="object"&&s&&!s.nodeType&&s,M=dt&&typeof module=="object"&&module&&!module.nodeType&&module,Vr=M&&M.exports===dt,z=Vr&&k.process,Wr=function(){try{var t=M&&M.require&&M.require("util").types;return t||z&&z.binding&&z.binding("util")}catch{}}();const w=Wr;var ht=w&&w.isTypedArray,qr=ht?G(ht):Hr;const Yr=qr;var Zr=Object.prototype,Jr=Zr.hasOwnProperty;function bt(t,e){var r=N(t),n=!r&&fr(t),u=!r&&!n&&gt(t),a=!r&&!n&&!u&&Yr(t),o=r||n||u||a,f=o?or(t.length,String):[],l=f.length;for(var g in t)(e||Jr.call(t,g))&&!(o&&(g=="length"||u&&(g=="offset"||g=="parent")||a&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||Tr(g,l)))&&f.push(g);return f}var Xr=Object.prototype;function R(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Xr;return t===r}function yt(t,e){return function(r){return t(e(r))}}var Qr=yt(Object.keys,Object);const kr=Qr;var tn=Object.prototype,en=tn.hasOwnProperty;function rn(t){if(!R(t))return kr(t);var e=[];for(var r in Object(t))en.call(t,r)&&r!="constructor"&&e.push(r);return e}function Tt(t){return t!=null&&pt(t.length)&&!rt(t)}function K(t){return Tt(t)?bt(t):rn(t)}function nn(t,e){return t&&U(e,K(e),t)}function an(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var on=Object.prototype,sn=on.hasOwnProperty;function cn(t){if(!C(t))return an(t);var e=R(t),r=[];for(var n in t)n=="constructor"&&(e||!sn.call(t,n))||r.push(n);return r}function H(t){return Tt(t)?bt(t,!0):cn(t)}function un(t,e){return t&&U(e,H(e),t)}var $t=typeof s=="object"&&s&&!s.nodeType&&s,_t=$t&&typeof module=="object"&&module&&!module.nodeType&&module,fn=_t&&_t.exports===$t,vt=fn?p.Buffer:void 0,jt=vt?vt.allocUnsafe:void 0;function ln(t,e){if(e)return t.slice();var r=t.length,n=jt?jt(r):new t.constructor(r);return t.copy(n),n}function gn(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function pn(t,e){for(var r=-1,n=t==null?0:t.length,u=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[u++]=o)}return a}function mt(){return[]}var dn=Object.prototype,hn=dn.propertyIsEnumerable,wt=Object.getOwnPropertySymbols,bn=wt?function(t){return t==null?[]:(t=Object(t),pn(wt(t),function(e){return hn.call(t,e)}))}:mt;const V=bn;function yn(t,e){return U(t,V(t),e)}function At(t,e){for(var r=-1,n=e.length,u=t.length;++r<n;)t[u+r]=e[r];return t}var Tn=yt(Object.getPrototypeOf,Object);const St=Tn;var $n=Object.getOwnPropertySymbols,_n=$n?function(t){for(var e=[];t;)At(e,V(t)),t=St(t);return e}:mt;const Ot=_n;function vn(t,e){return U(t,Ot(t),e)}function Pt(t,e,r){var n=e(t);return N(t)?n:At(n,r(t))}function jn(t){return Pt(t,K,V)}function mn(t){return Pt(t,H,Ot)}var wn=y(p,"DataView");const W=wn;var An=y(p,"Promise");const q=An;var Sn=y(p,"Set");const Y=Sn;var On=y(p,"WeakMap");const Z=On;var Ct="[object Map]",Pn="[object Object]",It="[object Promise]",Et="[object Set]",Ft="[object WeakMap]",Mt="[object DataView]",Cn=b(W),In=b(I),En=b(q),Fn=b(Y),Mn=b(Z),$=P;(W&&$(new W(new ArrayBuffer(1)))!=Mt||I&&$(new I)!=Ct||q&&$(q.resolve())!=It||Y&&$(new Y)!=Et||Z&&$(new Z)!=Ft)&&($=function(t){var e=P(t),r=e==Pn?t.constructor:void 0,n=r?b(r):"";if(n)switch(n){case Cn:return Mt;case In:return Ct;case En:return It;case Fn:return Et;case Mn:return Ft}return e});const J=$;var xn=Object.prototype,Dn=xn.hasOwnProperty;function Un(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&Dn.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Bn=p.Uint8Array;const xt=Bn;function X(t){var e=new t.constructor(t.byteLength);return new xt(e).set(new xt(t)),e}function Ln(t,e){var r=e?X(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var Nn=/\w*$/;function Gn(t){var e=new t.constructor(t.source,Nn.exec(t));return e.lastIndex=t.lastIndex,e}var Dt=v?v.prototype:void 0,Ut=Dt?Dt.valueOf:void 0;function zn(t){return Ut?Object(Ut.call(t)):{}}function Rn(t,e){var r=e?X(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var Kn="[object Boolean]",Hn="[object Date]",Vn="[object Map]",Wn="[object Number]",qn="[object RegExp]",Yn="[object Set]",Zn="[object String]",Jn="[object Symbol]",Xn="[object ArrayBuffer]",Qn="[object DataView]",kn="[object Float32Array]",ta="[object Float64Array]",ea="[object Int8Array]",ra="[object Int16Array]",na="[object Int32Array]",aa="[object Uint8Array]",oa="[object Uint8ClampedArray]",ia="[object Uint16Array]",sa="[object Uint32Array]";function ca(t,e,r){var n=t.constructor;switch(e){case Xn:return X(t);case Kn:case Hn:return new n(+t);case Qn:return Ln(t,r);case kn:case ta:case ea:case ra:case na:case aa:case oa:case ia:case sa:return Rn(t,r);case Vn:return new n;case Wn:case Zn:return new n(t);case qn:return Gn(t);case Yn:return new n;case Jn:return zn(t)}}var Bt=Object.create,ua=function(){function t(){}return function(e){if(!C(e))return{};if(Bt)return Bt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const fa=ua;function la(t){return typeof t.constructor=="function"&&!R(t)?fa(St(t)):{}}var ga="[object Map]";function pa(t){return F(t)&&J(t)==ga}var Lt=w&&w.isMap,da=Lt?G(Lt):pa;const ha=da;var ba="[object Set]";function ya(t){return F(t)&&J(t)==ba}var Nt=w&&w.isSet,Ta=Nt?G(Nt):ya;const $a=Ta;var _a=1,va=2,ja=4,Gt="[object Arguments]",ma="[object Array]",wa="[object Boolean]",Aa="[object Date]",Sa="[object Error]",zt="[object Function]",Oa="[object GeneratorFunction]",Pa="[object Map]",Ca="[object Number]",Rt="[object Object]",Ia="[object RegExp]",Ea="[object Set]",Fa="[object String]",Ma="[object Symbol]",xa="[object WeakMap]",Da="[object ArrayBuffer]",Ua="[object DataView]",Ba="[object Float32Array]",La="[object Float64Array]",Na="[object Int8Array]",Ga="[object Int16Array]",za="[object Int32Array]",Ra="[object Uint8Array]",Ka="[object Uint8ClampedArray]",Ha="[object Uint16Array]",Va="[object Uint32Array]",i={};i[Gt]=i[ma]=i[Da]=i[Ua]=i[wa]=i[Aa]=i[Ba]=i[La]=i[Na]=i[Ga]=i[za]=i[Pa]=i[Ca]=i[Rt]=i[Ia]=i[Ea]=i[Fa]=i[Ma]=i[Ra]=i[Ka]=i[Ha]=i[Va]=!0,i[Sa]=i[zt]=i[xa]=!1;function B(t,e,r,n,u,a){var o,f=e&_a,l=e&va,g=e&ja;if(r&&(o=u?r(t,n,u,a):r(t)),o!==void 0)return o;if(!C(t))return t;var Vt=N(t);if(Vt){if(o=Un(t),!f)return gn(t,o)}else{var A=J(t),Wt=A==zt||A==Oa;if(gt(t))return ln(t,f);if(A==Rt||A==Gt||Wt&&!u){if(o=l||Wt?{}:la(t),!f)return l?vn(t,un(o,t)):yn(t,nn(o,t))}else{if(!i[A])return u?t:{};o=ca(t,A,f)}}a||(a=new m);var qt=a.get(t);if(qt)return qt;a.set(t,o),$a(t)?t.forEach(function(h){o.add(B(h,e,r,h,t,a))}):ha(t)&&t.forEach(function(h,_){o.set(_,B(h,e,r,_,t,a))});var eo=g?l?mn:jn:l?H:K,Yt=Vt?void 0:eo(t);return er(Yt||t,function(h,_){Yt&&(_=h,h=t[_]),it(o,_,B(h,e,r,_,t,a))}),o}var Wa=1,qa=4;function Kt(t){return B(t,Wa|qa)}class Ya{constructor(e,r){r=r||{envParams:{}},this.fnString=e,this.fn=Ht(e),this.userParamsSchema={},this.result=[],this.envParams=r.envParams}runOne(e,r=1e4){return new Promise(n=>{const u=setTimeout(()=>{n({data:null,code:1,msg:"timeout",isSuccess:!1,date:new Date().getTime(),userParams:e})},r);this.fn(this.envParams,e).then(a=>{clearTimeout(u),n({data:a,code:0,msg:"success",isSuccess:!0,date:new Date().getTime(),userParams:e})}).catch(a=>{clearTimeout(u),n({data:a,code:(a==null?void 0:a.code)||1,msg:(a==null?void 0:a.message)||"error",isSuccess:!1,date:new Date().getTime(),userParams:e})})})}async run(e){const r=[],{allUserParams:n=[],concurrency:u=1}=e;for(let a=0;a<n.length;a=a+u){const o=await Promise.all(n.slice(a,a+u).map(f=>this.runOne(Kt(f),e.timeout)));r.push(...o)}return this.result.push(...r),r}}const Ht=t=>Function(`return ${t}`)(),Za=t=>{const{rawParams:e,range:r}=t,{start:n,end:u}=r,a=[];for(let o=n;o<=u;o++){const f=Kt(e);f.page=o,a.push(f)}return a},Ja=t=>/^(async\s+)?function\s*\w*\s*\([\w\s,]*\)\s*\{[\s\S]*\}$/.test(t),Xa=t=>/^async\s*function\s*\w*\s*\([\w\s,]*\)\s*\{[\s\S]*\}$/.test(t),Qa=t=>/^[a-zA-Z0-9_-]{4,16}$/.test(t),ka=t=>/^[a-zA-Z0-9_-]{6,16}$/.test(t),to=(t,e)=>t+e;s.Crawler=Ya,s.add=to,s.checkPassword=ka,s.checkUserName=Qa,s.generateParams=Za,s.isAsyncFunctionString=Xa,s.isFunctionString=Ja,s.turnFnStringToFn=Ht,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.js.map
